"use strict";(self["webpackChunkmy_project"]=self["webpackChunkmy_project"]||[]).push([[305],{305:function(e,t,l){l.r(t),l.d(t,{default:function(){return q}});var a=l(6768);function s(e,t,l,s,o,n){const u=(0,a.g2)("TasksComponent");return(0,a.uX)(),(0,a.Wv)(u)}l(4114),l(8111),l(2489),l(7588),l(4603),l(7566),l(8721);var o=l(144),n=l(8626),u=l.n(n),i=l(1387),d=l(2768),k=l(4232),c=l(5130);const v={key:0,class:"task-title-wrapp"},r={key:1},p={class:"new-name"};var b=(0,a.pM)({__name:"TaskTitle",props:{newTitle:{},oldTitle:{}},emits:["updateNewTitle"],setup(e,{emit:t}){const l=e,s=(0,o.KR)(!0),n=(0,o.KR)(l.oldTitle.toUpperCase()||""),u=t,i=()=>{u("updateNewTitle",""),s.value=!0},d=()=>{s.value=!1},b=()=>{u("updateNewTitle",n.value),s.value=!0};return(e,t)=>((0,a.uX)(),(0,a.CE)("div",null,[s.value?((0,a.uX)(),(0,a.CE)("div",v,[(0,a.Lk)("h2",null,(0,k.v_)(e.newTitle.toUpperCase()||e.oldTitle.toUpperCase()),1),(0,a.Lk)("div",null,[e.newTitle.length?((0,a.uX)(),(0,a.CE)("button",{key:1,class:"button-default",onClick:i},"Cancel Editing")):((0,a.uX)(),(0,a.CE)("button",{key:0,class:"button-default",onClick:d},"Edit"))])])):((0,a.uX)(),(0,a.CE)("div",r,[(0,a.Lk)("div",p,[t[1]||(t[1]=(0,a.Lk)("label",{for:"name"},"New todo name",-1)),(0,a.bo)((0,a.Lk)("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),type:"text",placeholder:"Your new todo name"},null,512),[[c.Jo,n.value]])]),(0,a.Lk)("div",{class:"task-title-button-group"},[(0,a.Lk)("button",{class:"button-destructive",onClick:i},"Cancel"),(0,a.Lk)("button",{class:"button-secondary",onClick:b},"Done!")])]))]))}});const C=b;var y=C,m=(l(1701),l(9824));const T={class:"task-body-wrapp"},f={class:"task-body"},g={class:"task-raw"},h={key:0,class:"task-edit"},L={key:1,class:"checkbox-wrapp"},w=["onUpdate:modelValue","id"],E=["for"],I={class:"tasks-button-group"},X=["onClick"],D=["onClick"],S=["onClick"],_={class:"new-task-wrapp"},K={class:"new-task"},N={key:0},R={class:"task-body-wrapp"},j={class:"task-title-button-group"},x=["disabled"];var B=(0,a.pM)({__name:"TasksBody",props:{tasksInStore:{},tasks:{}},emits:["deleteTaskPermanently","setNewTaskTitle","createTask"],setup(e,{emit:t}){const l=e,{cloneDeep:s}=u(),n=t,i=(0,o.KR)(!1),d=(0,o.KR)(!1),v=(0,o.KR)(""),r=(0,o.KR)(null),p=(0,o.Kh)(s(l.tasks.map((e=>({id:e.id,label:e.task.split(". ").splice(1).join(". ")}))))),b=(0,o.KR)(null),C=(0,a.EW)((()=>{const e=l.tasks.filter((e=>e.task.split(". ").splice(1).join(". "))).map((e=>e.id)),t=[];return e.forEach((e=>{const a=l.tasksInStore.findIndex((t=>t.id===e)),s=l.tasks.findIndex((t=>t.id===e));-1!==a&&-1!==s&&l.tasksInStore[a].task.split(". ").splice(1).join(". ")!==l.tasks[s].task.split(". ").splice(1).join(". ")&&t.push(e)})),t})),y=e=>{i.value=!0,r.value=e},B=()=>{i.value=!1},U=()=>{if(r.value){n("deleteTaskPermanently",r.value);const e=p.findIndex((e=>e.id===r.value));p.splice(e,1)}r.value=null,i.value=!1},W=(0,a.EW)((()=>{if(b.value){const e=p.findIndex((e=>e.id===b.value));if(-1!==e)return p[e]}return null})),A=e=>{b.value=e},P=()=>{b.value=null},F=e=>{n("setNewTaskTitle",e,"")},Q=()=>{const e=p.findIndex((e=>e.id===b.value));-1!==e&&n("setNewTaskTitle",b.value,p[e].label),b.value=null},M=()=>{d.value=!1},V=()=>{d.value=!0},$=e=>{e.preventDefault(),v.value=""},O=e=>{e.preventDefault(),p.push({id:l.tasks[l.tasks.length-1].id+1,label:v.value}),n("createTask",{id:l.tasks[l.tasks.length-1].id+1,task:`${l.tasks.length+1}. ${v.value}`,isDone:!1}),v.value=""};return(e,t)=>((0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",T,[t[3]||(t[3]=(0,a.Lk)("h2",{class:"task-body-title"},"TASKS IN TODO",-1)),(0,a.Lk)("div",f,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.tasks,(l=>((0,a.uX)(),(0,a.CE)("div",{key:l.id},[(0,a.Lk)("div",g,[b.value&&b.value===l.id?((0,a.uX)(),(0,a.CE)("div",h,[(0,a.Lk)("div",null,[t[2]||(t[2]=(0,a.Lk)("label",{for:"name"},"Edit task",-1)),(0,a.bo)((0,a.Lk)("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>W.value.label=e),type:"text",class:"task-input",placeholder:"Edit task"},null,512),[[c.Jo,W.value.label]])])])):((0,a.uX)(),(0,a.CE)("div",L,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":e=>l.isDone=e,id:l.id},null,8,w),[[c.lH,l.isDone]]),(0,a.Lk)("label",{for:l.id},(0,k.v_)(l.task.split(". ").splice(1).join(". ")?l.task.split(". ").splice(1).join(". "):e.tasksInStore.filter((e=>e.id===l.id))[0].task.split(". ").splice(1).join(". ")),9,E)])),(0,a.Lk)("div",I,[C.value.includes(l.id)?((0,a.uX)(),(0,a.CE)("button",{key:0,class:"button-destructive",onClick:e=>F(l.id)}," Cancel Editing ",8,X)):(0,a.Q3)("",!0),b.value&&b.value===l.id?((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.Lk)("button",{class:"button-default",onClick:P},"Cancel"),(0,a.Lk)("button",{class:"button-secondary",onClick:Q},"Done!")],64)):((0,a.uX)(),(0,a.CE)(a.FK,{key:2},[(0,a.Lk)("button",{class:"button-default",onClick:e=>A(l.id)},"editTask",8,D),(0,a.Lk)("button",{class:"button-secondary",onClick:e=>y(l.id)},"deleteTask",8,S)],64))])])])))),128))])]),(0,a.Lk)("div",_,[(0,a.Lk)("div",K,[t[4]||(t[4]=(0,a.Lk)("h2",{class:"text-lg mr-5"},"Create new task",-1)),(0,a.Lk)("div",null,[d.value?((0,a.uX)(),(0,a.CE)("button",{key:0,class:"button-default",onClick:M},"Hide")):((0,a.uX)(),(0,a.CE)("button",{key:1,class:"button-destructive",onClick:V},"Show!"))])]),d.value?((0,a.uX)(),(0,a.CE)("div",N,[(0,a.Lk)("form",null,[(0,a.Lk)("div",R,[t[5]||(t[5]=(0,a.Lk)("label",{for:"name"},"New task",-1)),(0,a.bo)((0,a.Lk)("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>v.value=e),type:"text",placeholder:"New task"},null,512),[[c.Jo,v.value]])]),(0,a.Lk)("div",j,[(0,a.Lk)("button",{class:"button-default",onClick:$},"Cancel"),(0,a.Lk)("button",{class:"button-secondary",disabled:!v.value.length,onClick:O},"Create!",8,x)])])])):(0,a.Q3)("",!0)]),i.value?((0,a.uX)(),(0,a.Wv)(m.A,{key:0,title:"Delete task ?",description:"Are you sure you want to delete task?",onCloseDialog:B,onDeleteTodoPermanently:U})):(0,a.Q3)("",!0)],64))}});const U=B;var W=U;const A={class:"tasks-button-group"},P={class:"task-wrapp"};var F=(0,a.pM)({__name:"TasksComponent",setup(e){const t=(0,d.a)(),l=(0,i.rd)(),{cloneDeep:s,isEqual:n}=u(),k=(0,o.KR)(!1),c=(0,o.KR)(!1),v=(0,a.EW)((()=>t.openTodoId)),r=(0,o.KR)(""),p=(0,o.Kh)(v.value?s(t.getTodoById(v.value).tasks):[]),b=(0,a.EW)((()=>v.value&&r.value&&t.getTodoById(v.value).title!==r.value||v.value&&!n(p,t.getTodoById(v.value).tasks)));(0,a.KC)((()=>{const e=new URL(window.location.href),a=e.pathname.split("/")[e.pathname.split("/").length-1],o=localStorage.getItem("todoList")||"",n=localStorage.getItem("todoId");if(o.length)return t.setTodoList(o),n&&n===a?(v.value||t.updateOpenTodoId(Number(a)),void(p.length||s(t.getTodoById(Number(a)).tasks).forEach((e=>{p.push(e)})))):void l.push("/todo_list");l.push("/")}));const C=()=>{k.value=!0},T=()=>{k.value=!1,c.value&&(c.value=!1,l.push("/todo_list"))},f=()=>{b.value&&v.value&&(t.updateTodo(v.value,r.value,p),c.value=!1,r.value="")},g=()=>{if(c.value&&v.value)return t.updateTodo(v.value,r.value,p),k.value=!1,r.value="",localStorage.setItem("todoId",String("")),void l.push("/todo_list");v.value&&t.deleteTodo(v.value),k.value=!1,localStorage.setItem("todoId",String("")),l.push("/todo_list")},h=()=>{if(v.value&&!n(p,t.getTodoById(v.value).tasks)&&p.forEach((e=>{!e.task.split(". ").splice(1).join(". ")&&v.value&&(e.task=e.task.split(". ")[0]+". "+t.getTodoById(v.value).tasks.filter((t=>t.id===e.id))[0].task.split(". ").splice(1).join(". "))})),v.value&&r.value&&t.getTodoById(v.value).title!==r.value||v.value&&!n(p,t.getTodoById(v.value).tasks))return c.value=!0,void(k.value=!0);localStorage.setItem("todoId",String("")),l.push("/todo_list")},L=e=>{r.value=e},w=e=>{const t=p.findIndex((t=>t.id===e));-1!==t&&(p.splice(t,1),p.forEach(((e,t)=>{const l=e.task.split(". ");l[0]=`${t+1}`,e.task=l.join(". ")})))},E=(e,t)=>{const l=p.findIndex((t=>t.id===e));-1!==l&&(p.forEach((e=>{e.task=e.task.split(". ").splice(1).join(". ")})),p[l].task=t,p.forEach(((e,t)=>{e.task=`${t+1}. ${e.task}`})))},I=()=>{v.value&&(r.value="",p.splice(0,p.length),t.getTodoById(v.value).tasks.forEach((e=>{p.push(s(e))})))},X=e=>{p.push(e)};return(e,l)=>((0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",A,[(0,a.Lk)("button",{class:"button-default",onClick:C},"Delete todo"),b.value?((0,a.uX)(),(0,a.CE)("button",{key:0,class:"button-destructive",onClick:f},"Save сhanges")):(0,a.Q3)("",!0),b.value?((0,a.uX)(),(0,a.CE)("button",{key:1,class:"button-secondary",onClick:I},"Undo сhanges")):(0,a.Q3)("",!0),(0,a.Lk)("button",{class:"button-default",onClick:h},"Return")]),(0,a.Lk)("div",P,[(0,a.bF)(y,{"new-title":r.value,"old-title":v.value?(0,o.R1)(t).getTodoById(v.value).title:"",onUpdateNewTitle:L},null,8,["new-title","old-title"]),(0,a.bF)(W,{onDeleteTaskPermanently:w,onSetNewTaskTitle:E,onCreateTask:X,"tasks-in-store":v.value?(0,o.R1)(t).getTodoById(v.value).tasks:[],tasks:p},null,8,["tasks-in-store","tasks"]),k.value?((0,a.uX)(),(0,a.Wv)(m.A,{key:0,title:c.value?"Changes not saved!":"Delete todo?",description:c.value?"Do you want to save changes?":"Are you sure you want to delete todo?",onCloseDialog:T,onDeleteTodoPermanently:g},null,8,["title","description"])):(0,a.Q3)("",!0)])]))}});const Q=F;var M=Q,V=(0,a.pM)({components:{TasksComponent:M}}),$=l(1241);const O=(0,$.A)(V,[["render",s]]);var q=O},9824:function(e,t,l){l.d(t,{A:function(){return v}});var a=l(6768),s=l(4232);const o={id:"modal",class:"modal"},n={class:"modal-content"},u={class:"modal-header"},i={id:"modal-title"},d={class:"modal-body"};var k=(0,a.pM)({__name:"DialogWindow",props:{title:{type:String,required:!0},description:{type:String,required:!0}},emits:["closeDialog","deleteTodoPermanently"],setup(e,{emit:t}){const l=e,k=t,c=()=>{k("closeDialog")},v=()=>{k("deleteTodoPermanently")};return(e,t)=>((0,a.uX)(),(0,a.CE)("div",o,[(0,a.Lk)("div",n,[(0,a.Lk)("div",u,[(0,a.Lk)("h2",i,(0,s.v_)(l.title),1),(0,a.Lk)("span",{class:"close",id:"close-modal",onClick:c},"×")]),(0,a.Lk)("div",d,[(0,a.Lk)("p",null,(0,s.v_)(l.description),1)]),(0,a.Lk)("div",{class:"modal-footer buttons-group"},[(0,a.Lk)("button",{id:"no-button",class:"button button-default",onClick:c},"No"),(0,a.Lk)("button",{id:"ok-button",class:"button button-secondary",onClick:v},"Ok")])])]))}});const c=k;var v=c}}]);
//# sourceMappingURL=305.286fc08f.js.map